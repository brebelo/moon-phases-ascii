import colorama
from colorama import Fore, Style
colorama.init(autoreset=True)

COLORS = {    
    ".": Fore.BLUE,            # ombre = bleu sombre
    ":": Fore.LIGHTBLUE_EX,    # pénombre = bleu clair
    "#": Fore.CYAN,            # surface éclairée = cyan
    "@": Fore.LIGHTCYAN_EX,    # lumière maximale = bleu très clair
}



# --- ASCII DATA ---
ascii_0p = """

            ........       
          ............     
         ..............    
        ................   
         ..............    
          ............     
            ........       
        
"""

   
ascii_3p = """ 

            .....:##       
          .......:###@     
         .........:##@@    
        ...........###@@   
         ..........:##@    
          .......:###@     
            .....:##       
        
"""

ascii_6p = """

            ..:##@@@       
          .......:###@     
         .........:##@@    
        ...........###@@   
         .......:##@@@@    
          ......:###@@     
            ...:##@@       
        
"""

ascii_9p = """
            ..:##@@@       
          .....:###@@@     
         .........:##@@    
        ........###@@@@@   
         .......:##@@@@    
          ....:###@@@@     
            .:##@@@@       
        
"""

ascii_12p = """

            ..:##@@@       
          .....:###@@@     
         ......:##@@@@@    
        ........###@@@@@   
         .......:##@@@@    
          ..:###@@@@@@     
            .:##@@@@       
        
"""

ascii_15p = """

            ..:##@@@       
          ...:###@@@@@     
         ......:##@@@@@    
        ........###@@@@@   
         .....:##@@@@@@    
          ..:###@@@@@@     
            .:##@@@@       
        
"""

ascii_18p = """

            ..:##@@@       
          ...:###@@@@@     
         .....:##@@@@@@    
        ......###@@@@@@@   
         .....:##@@@@@@    
          ..:###@@@@@@     
            .:##@@@@       
        
"""

ascii_21p = """

            ..:##@@@       
          ...:###@@@@@     
         ....:##@@@@@@@    
        ......###@@@@@@@   
         ....:##@@@@@@@    
          ..:###@@@@@@     
            .:##@@@@       
        
"""

ascii_24p = """

            .:##@@@@       
          ...:###@@@@@     
         ....:##@@@@@@@    
        ......###@@@@@@@   
         ....:##@@@@@@@    
          ..:###@@@@@@     
            .:##@@@@       
        

"""

ascii_27p = """

            .:##@@@@       
          ..:###@@@@@@     
         ....:##@@@@@@@    
        .....###@@@@@@@@   
         ....:##@@@@@@@    
          .:###@@@@@@@     
            .:##@@@@       
        
"""

ascii_30p = """
            .:##@@@@       
          ..:###@@@@@@     
         ...:##@@@@@@@@    
        .....###@@@@@@@@   
         ...:##@@@@@@@@    
          .:###@@@@@@@     
            .:##@@@@       
        
"""

ascii_33p = """
            .:##@@@@       
          .:###@@@@@@@     
         ...:##@@@@@@@@    
        .....###@@@@@@@@   
         ...:##@@@@@@@@    
          .:###@@@@@@@     
            .:##@@@@       
        
"""

ascii_36p = """
            .:##@@@@       
          .:###@@@@@@@     
         ...:##@@@@@@@@    
        .....###@@@@@@@@   
         ...:##@@@@@@@@    
          .:###@@@@@@@     
            :##@@@@@       
        
"""

ascii_39p = """
            :##@@@@@       
          .:###@@@@@@@     
         ...:##@@@@@@@@    
        .....###@@@@@@@@   
         ...:##@@@@@@@@    
          .:###@@@@@@@     
            :##@@@@@       
        
"""

ascii_42p = """
            :##@@@@@       
          .:###@@@@@@@     
         ...:##@@@@@@@@    
        ....###@@@@@@@@@   
         ...:##@@@@@@@@    
          .:###@@@@@@@     
            :##@@@@@       
        
"""

ascii_45p = """
            :##@@@@@       
          .:###@@@@@@@     
         ..:##@@@@@@@@@    
        ....###@@@@@@@@@   
         ..:##@@@@@@@@@    
          .:###@@@@@@@     
            :##@@@@@       
        
"""

ascii_48p = """
            :##@@@@@       
          :###@@@@@@@@     
         ..:##@@@@@@@@@    
        ....###@@@@@@@@@   
         ..:##@@@@@@@@@    
          :###@@@@@@@@     
            :##@@@@@       
        
"""
ascii_51p = """
            :##@@@@@       
          :###@@@@@@@@     
         ..:##@@@@@@@@@    
        ...###@@@@@@@@@@   
         ..:##@@@@@@@@@    
          :###@@@@@@@@     
            :##@@@@@       
        
"""

ascii_54p = """
            :##@@@@@       
          :###@@@@@@@@     
         ..:##@@@@@@@@@    
        ...###@@@@@@@@@@   
         ..:##@@@@@@@@@    
          :###@@@@@@@@     
            :#@@@@@@       
        
"""

ascii_57p = """
            :##@@@@@       
          :###@@@@@@@@     
         ..:##@@@@@@@@@    
        ..####@@@@@@@@@@   
         ..:##@@@@@@@@@    
          :###@@@@@@@@     
            :#@@@@@@       
        
"""

ascii_60p = """
            :##@@@@@       
          :###@@@@@@@@     
         ..:##@@@@@@@@@    
        ..####@@@@@@@@@@   
         .:##@@@@@@@@@@    
          :###@@@@@@@@     
            :#@@@@@@       
        
"""

ascii_63p = """
            :##@@@@@       
          :###@@@@@@@@     
         ..:##@@@@@@@@@    
        ..####@@@@@@@@@@   
         .:##@@@@@@@@@@    
          :###@@@@@@@@     
            ##@@@@@@       
        
"""

ascii_66p = """
            ##@@@@@@       
          :###@@@@@@@@     
         ..:##@@@@@@@@@    
        ..####@@@@@@@@@@   
         .:##@@@@@@@@@@    
          :###@@@@@@@@     
            ##@@@@@@       
        
"""

ascii_69p = """
            ##@@@@@@       
          :###@@@@@@@@     
         .:##@@@@@@@@@@    
        ..####@@@@@@@@@@   
         .:##@@@@@@@@@@    
          :###@@@@@@@@     
            ##@@@@@@       
        
"""

ascii_72p = """
            ##@@@@@@       
          :###@@@@@@@@     
         .:##@@@@@@@@@@    
        .####@@@@@@@@@@@   
         .:##@@@@@@@@@@    
          :###@@@@@@@@     
            ##@@@@@@       
        
"""

ascii_75p = """
            ##@@@@@@       
          :###@@@@@@@@     
         .:##@@@@@@@@@@    
        .###@@@@@@@@@@@@   
         .:##@@@@@@@@@@    
          :###@@@@@@@@     
            ##@@@@@@       
        

"""

ascii_78p = """
            ##@@@@@@       
          :##@@@@@@@@@     
         .:##@@@@@@@@@@    
        .###@@@@@@@@@@@@   
         .:#@@@@@@@@@@@    
          :##@@@@@@@@@     
            ##@@@@@@       
        

"""

ascii_81p = """
            ##@@@@@@       
          :#@@@@@@@@@@     
         .:#@@@@@@@@@@@    
        .###@@@@@@@@@@@@   
         .:#@@@@@@@@@@@    
          :##@@@@@@@@@     
            ##@@@@@@       
        

"""

ascii_84p = """

            #@@@@@@@       
          :#@@@@@@@@@@     
         .:#@@@@@@@@@@@    
        .###@@@@@@@@@@@@   
         .:#@@@@@@@@@@@    
          :##@@@@@@@@@     
            ##@@@@@@       
        
       
"""

ascii_87p = """

            #@@@@@@@       
          :#@@@@@@@@@@     
         .:#@@@@@@@@@@@    
        .###@@@@@@@@@@@@   
         .:#@@@@@@@@@@@    
          :##@@@@@@@@@     
            #@@@@@@@       
        
            
"""

ascii_90p = """
            #@@@@@@@       
          :#@@@@@@@@@@     
         .:#@@@@@@@@@@@    
        .###@@@@@@@@@@@@   
         .:#@@@@@@@@@@@    
          :##@@@@@@@@@     
            #@@@@@@@       
        
"""

ascii_93p = """

            #@@@@@@@       
          :#@@@@@@@@@@     
         .:#@@@@@@@@@@@    
        .##@@@@@@@@@@@@@   
         .:#@@@@@@@@@@@    
          :##@@@@@@@@@     
            #@@@@@@@       
        
"""

ascii_96p = """

            #@@@@@@@       
          :#@@@@@@@@@@     
         :#@@@@@@@@@@@@    
        .#@@@@@@@@@@@@@@   
         :#@@@@@@@@@@@@    
          :#@@@@@@@@@@     
            #@@@@@@@       
        
"""

ascii_99p = """
            #@@@@@@@       
          @@@@@@@@@@@@     
         @@@@@@@@@@@@@@    
        #@@@@@@@@@@@@@@@   
         @@@@@@@@@@@@@@    
          @@@@@@@@@@@@     
            #@@@@@@@       
        
"""

ascii_100p = """
            @@@@@@@@       
          @@@@@@@@@@@@     
         @@@@@@@@@@@@@@    
        @@@@@@@@@@@@@@@@   
         @@@@@@@@@@@@@@    
          @@@@@@@@@@@@     
            @@@@@@@@       
        
"""

lunes_phases = [
        ascii_0p,
        ascii_3p,
        ascii_6p,
        ascii_9p,
        ascii_12p,
        ascii_15p,
        ascii_18p,
        ascii_21p,
        ascii_24p,
        ascii_27p,
        ascii_30p,
        ascii_33p,
        ascii_36p,
        ascii_39p,
        ascii_42p,
        ascii_45p,
        ascii_48p,
        ascii_51p,
        ascii_54p,
        ascii_57p,
        ascii_60p,
        ascii_63p,
        ascii_66p,
        ascii_69p,
        ascii_72p,
        ascii_75p,
        ascii_78p,
        ascii_81p,
        ascii_84p,
        ascii_87p,
        ascii_90p,
        ascii_93p,
        ascii_96p,
        ascii_99p,
        ascii_100p,

]


def miroir_ascii(ascii_art):
    lignes = ascii_art.splitlines()
    lignes_miroir = [ligne[::-1] for ligne in lignes]
    return "\n".join(lignes_miroir)


def lune(illumination, age_lune, cycle=29.53058867):
    index = int(illumination // 3)
    index = max(0, min(index, len(lunes_phases) - 1))

    ascii_lune = lunes_phases[index]

    #decroissance
    if age_lune > cycle / 2:
        ascii_lune = miroir_ascii(ascii_lune)

    return ascii_lune

def colorer_ascii(ascii_art):
    lignes = ascii_art.splitlines()
    lignes_color = []

    for ligne in lignes:
        nouvelle_ligne = ""
        for char in ligne:
            if char in COLORS:
                nouvelle_ligne += COLORS[char] + char
            else:
                nouvelle_ligne += char
        lignes_color.append(nouvelle_ligne)

    return "\n".join(lignes_color)
